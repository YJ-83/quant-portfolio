"""
테마별 종목 데이터
- 웹 검색 기반으로 수집한 테마별 대표 종목 리스트
- 2024-2025년 기준 (2025.01 업데이트)
"""

# 테마별 종목 딕셔너리
# 키: 테마명, 값: [(종목코드, 종목명), ...]
# 종목코드는 한국거래소 6자리 코드

THEME_STOCKS = {
    "로봇": [
        # 대장주
        ("277810", "레인보우로보틱스"),
        ("454910", "두산로보틱스"),
        ("108490", "로보티즈"),
        # 협동로봇/산업용로봇
        ("090710", "휴림로봇"),
        ("058610", "에스피지"),
        ("056080", "유진로봇"),
        ("394280", "유일로보틱스"),
        ("090360", "로보스타"),
        ("060280", "큐렉소"),
        ("388720", "티로보틱스"),
        ("049070", "인탑스"),
        ("067310", "하나마이크론"),
        # 로봇 부품/시스템
        ("352480", "씨메스"),
        ("140860", "파크시스템스"),
        ("064290", "인텍플러스"),
        ("317690", "퀄리타스반도체"),
        # 서비스/물류 로봇
        ("272290", "이녹스첨단소재"),
        ("443060", "소프트기어"),
        ("263810", "상신전자"),
        ("102710", "이엔에프테크놀로지"),
        # 로봇 센서/제어
        ("043150", "바텍"),
        ("099190", "아이센스"),
        ("094360", "칩스앤미디어"),
        ("299660", "샘씨엔에스"),
        # 의료로봇
        ("237880", "클리노믹스"),
        ("067080", "대화제약"),
        ("950170", "JTC"),
        # 추가 로봇 관련주 (2026 웹검색)
        ("048870", "싸이맥스"),
        ("096630", "에스코넥"),
        ("204270", "제이앤티씨"),
        ("083310", "엘오티베큠"),
        ("093520", "매커스"),
        ("044780", "곡산"),
        ("023160", "태광"),
        ("204620", "글로벌텍스프리"),
        ("042370", "비츠로테크"),
        ("084370", "유진테크"),
    ],

    "반도체": [
        # 대형주
        ("005930", "삼성전자"),
        ("000660", "SK하이닉스"),
        # 반도체 장비 - 대장주
        ("042700", "한미반도체"),
        ("058470", "리노공업"),
        ("036930", "주성엔지니어링"),
        ("403870", "HPSP"),
        # 반도체 장비 - 후공정
        ("089030", "테크윙"),
        ("131970", "테스나"),
        ("095340", "ISC"),
        ("036540", "SFA반도체"),
        # 반도체 장비 - 전공정
        ("084370", "유진테크"),
        ("240810", "원익IPS"),
        ("039030", "이오테크닉스"),
        ("083930", "아바코"),
        ("071280", "로체시스템즈"),
        # 반도체 소재
        ("357780", "솔브레인"),
        ("005290", "동진쎄미켐"),
        ("166090", "하나머티리얼즈"),
        ("336570", "원익QnC"),
        ("064760", "티씨케이"),
        ("000990", "DB하이텍"),
        ("348210", "넥스틴"),
        # 반도체 패키징/테스트
        ("222800", "심텍"),
        ("036810", "에프에스티"),
        ("140860", "파크시스템스"),
        ("357550", "석경에이티"),
        ("263750", "펨트론"),
        ("064290", "인텍플러스"),
        # HBM/고대역폭메모리 관련
        ("025560", "미래산업"),
        ("017890", "한국알콜"),
        ("033640", "네패스"),
        ("067310", "하나마이크론"),
        # 반도체 설계/IP
        ("317690", "퀄리타스반도체"),
        ("054450", "텔레칩스"),
        ("192820", "코스맥스"),
        # 추가 반도체 관련주 (2026 웹검색)
        ("131290", "티에스이"),
        ("039440", "에스티아이"),
        ("228760", "지노믹트리"),
        ("950140", "잉글우드랩"),
        ("093320", "케이아이엔엑스"),
        ("094360", "칩스앤미디어"),
        ("101490", "에스앤에스텍"),
        ("088390", "이녹스"),
        ("036000", "예림당"),
        ("214420", "토니모리"),
    ],

    "방산": [
        # 대장주 (K-방산)
        ("012450", "한화에어로스페이스"),
        ("079550", "LIG넥스원"),
        ("064350", "현대로템"),
        ("047810", "한국항공우주"),
        ("272210", "한화시스템"),
        # 방산 함정/조선
        ("042660", "한화오션"),
        ("329180", "HD현대중공업"),
        # 방산 부품/시스템
        ("005870", "휴니드"),
        ("101930", "인화정공"),
        ("067390", "아스트"),
        ("003570", "SNT다이내믹스"),
        ("100840", "SNT에너지"),
        ("071970", "STX중공업"),
        # 방산 탄약/화약
        ("004710", "한솔테크닉스"),
        ("014970", "삼륭물산"),
        # 방산 전자전/통신
        ("033240", "자화전자"),
        ("081150", "티플랙스"),
        ("130500", "빅텍"),
        ("013810", "스페코"),
        # 방산 특수차량/장갑
        ("042670", "HD현대인프라코어"),
        ("007120", "미래아이앤지"),
        ("092300", "현우산업"),
        # 방산 소재/단조
        ("024900", "덕양산업"),
        ("004560", "현대비앤지스틸"),
        ("002030", "아세아"),
        ("025950", "동신건설"),
        ("025820", "이구산업"),
        # 추가 방산 관련주 (2026 웹검색)
        ("020000", "한섬"),
        ("104040", "대우건설"),
        ("014940", "오리엔탈정공"),
        ("023000", "삼원강재"),
        ("002690", "동일제강"),
        ("071090", "하이스틸"),
        ("307950", "현대오토에버"),
        ("220260", "켄코아에어로스페이스"),
        ("089790", "제이티"),
        ("011500", "한농화성"),
        ("002350", "넥센타이어"),
        ("082740", "HSD엔진"),
        ("023800", "인지컨트롤스"),
    ],

    "원자력/SMR": [
        # 대장주
        ("034020", "두산에너빌리티"),
        ("052690", "한전기술"),
        ("032820", "우리기술"),
        ("015760", "한국전력"),
        # 원자력 기자재/설비
        ("080520", "오르비텍"),
        ("011700", "한신기계"),
        ("083650", "비에이치아이"),
        ("267260", "HD현대일렉트릭"),
        # SMR 관련
        ("028260", "삼성물산"),
        ("000720", "현대건설"),
        ("096770", "SK이노베이션"),
        ("009830", "한화솔루션"),
        # 원전 계측/제어
        ("094820", "일진파워"),
        ("092790", "서전기전"),
        ("043090", "에너토크"),
        ("059090", "지투파워"),
        # 원전 소재/부품
        ("004490", "세방전지"),
        ("112610", "씨에스윈드"),
        ("026940", "부국철강"),
        ("046120", "한창제지"),
        # SMR 투자사
        ("267290", "경동도시가스"),
        # 원전 검사/안전
        ("094360", "칩스앤미디어"),
        ("025320", "시노펙스"),
        ("073010", "케이에스피"),
        # 추가 원자력/SMR 관련주 (2026 웹검색)
        ("014820", "동원시스템즈"),
        ("003480", "한진중공업홀딩스"),
        ("000860", "강남제비스코"),
        ("023150", "MH에탄올"),
        ("051500", "CJ프레시웨이"),
        ("051980", "센터온"),
        ("003830", "대한화섬"),
        ("017890", "한국알콜"),
        ("133820", "화인베스틸"),
        ("002030", "아세아"),
        ("014915", "성문전자"),
        ("004105", "태양금속우"),
    ],

    "바이오": [
        # 대형 바이오
        ("207940", "삼성바이오로직스"),
        ("068270", "셀트리온"),
        ("196170", "알테오젠"),
        ("000100", "유한양행"),
        ("068760", "셀트리온제약"),
        # 바이오시밀러/CMO
        ("302440", "SK바이오사이언스"),
        ("207940", "삼성바이오로직스"),
        # 신약개발
        ("128940", "한미약품"),
        ("141080", "리가켐바이오"),
        ("237690", "에스티팜"),
        ("326030", "SK바이오팜"),
        ("293480", "HLB"),
        ("039200", "오스코텍"),
        ("090660", "보로노이"),
        ("950160", "코오롱티슈진"),
        # 바이오 진단/AI
        ("328130", "루닛"),
        ("338220", "뷰노"),
        ("214150", "클래시스"),
        ("357550", "석경에이티"),
        # 제약
        ("006280", "녹십자"),
        ("185750", "종근당"),
        ("069620", "대웅제약"),
        ("000020", "동화약품"),
        ("000230", "일동제약"),
        ("225220", "동아에스티"),
        # 바이오 미용/헬스케어
        ("145020", "휴젤"),
        ("214450", "파마리서치"),
        ("287410", "제이시스메디칼"),
        ("950130", "엑세스바이오"),
        # 바이오 신규상장 2024
        ("323990", "박셀바이오"),
        ("950200", "아이엔지에프"),
        ("363280", "티와이홀딩스"),
        ("950190", "고바이오랩"),
        # 추가 바이오 관련주 (2026 웹검색)
        ("263750", "펨트론"),
        ("031510", "오스템임플란트"),
        ("290650", "엘앤씨바이오"),
        ("078160", "메디포스트"),
        ("215600", "신라젠"),
        ("086900", "메디톡스"),
        ("091990", "셀트리온헬스케어"),
        ("067080", "대화제약"),
        ("030190", "NICE평가정보"),
        ("140410", "메지온"),
        ("092730", "네오팜"),
        ("039840", "디오"),
        ("131030", "옵투스제약"),
    ],

    "AI/인공지능": [
        # 플랫폼/대형
        ("035420", "네이버"),
        ("035720", "카카오"),
        ("018260", "삼성에스디에스"),
        ("017670", "SK텔레콤"),
        # AI 솔루션
        ("047560", "이스트소프트"),
        ("126880", "알체라"),
        ("108860", "셀바스AI"),
        ("338220", "뷰노"),
        ("328130", "루닛"),
        ("300080", "플리토"),
        # AI 로봇
        ("277810", "레인보우로보틱스"),
        ("056080", "유진로봇"),
        ("060280", "큐렉소"),
        ("215100", "로보로보"),
        # AI 반도체
        ("039030", "이오테크닉스"),
        ("950170", "JTC"),
        ("054450", "텔레칩스"),
        # AI 데이터센터
        ("079940", "가비아"),
        ("093320", "케이아이엔엑스"),
        ("035760", "CJ ENM"),
        # AI 기타
        ("030520", "한글과컴퓨터"),
        ("032680", "소프트센"),
        ("031820", "콤텍시스템"),
        ("053800", "안랩"),
        ("131290", "티에스이"),
        ("058970", "엠로"),
        ("078600", "대주전자재료"),
        ("039290", "엠에이에스텍"),
        ("033640", "네패스"),
        ("263860", "지니언스"),
        # 추가 AI 관련주 (2026 웹검색)
        ("417500", "라이브러리컴퍼니"),
        ("347890", "퓨쳐스트림네트웍스"),
        ("036830", "솔브레인홀딩스"),
        ("083790", "크리스탈지노믹스"),
        ("220260", "켄코아에어로스페이스"),
        ("200710", "앤디포스"),
        ("352700", "베이비트리"),
        ("357430", "삼성FN리츠"),
        ("043150", "바텍"),
    ],

    "자사주소각": [
        ("034730", "SK"),
        ("028260", "삼성물산"),
        ("068270", "셀트리온"),
        ("010130", "고려아연"),
        ("004170", "신세계"),
        ("139130", "DGB금융지주"),
        ("316140", "우리금융지주"),
        ("071050", "한국금융지주"),
        ("006800", "미래에셋증권"),
        ("016360", "삼성증권"),
        ("005940", "NH투자증권"),
        ("003410", "쌍용C&E"),
        ("051900", "LG생활건강"),
        ("002790", "아모레G"),
        ("005380", "현대차"),
        ("000270", "기아"),
        ("011780", "금호석유"),
    ],

    "자동차/자동차부품": [
        # 완성차
        ("005380", "현대차"),
        ("000270", "기아"),
        # 1차 벤더
        ("012330", "현대모비스"),
        ("011210", "현대위아"),
        ("018880", "한온시스템"),
        ("204320", "만도"),
        ("161390", "한국타이어앤테크놀로지"),
        ("298050", "효성첨단소재"),
        # 자동차부품
        ("009320", "대유에이텍"),
        ("013520", "화승알앤에이"),
        ("024900", "덕양산업"),
        ("007340", "DN오토모티브"),
        ("010690", "화신"),
        ("009900", "명신산업"),
        ("064960", "에스앤케이폴리텍"),
        # 전장/ADAS
        ("307950", "현대오토에버"),
        ("005850", "에스엘"),
        ("007860", "서연"),
        ("086280", "현대글로비스"),
        # 추가 자동차 관련주 (2026 웹검색)
        ("014680", "한솔케미칼"),
        ("023590", "다우기술"),
        ("272290", "이녹스첨단소재"),
        ("093520", "매커스"),
        ("120110", "코오롱인더"),
        ("014580", "태광"),
        ("192820", "코스맥스"),
        ("084370", "유진테크"),
        ("011300", "성안"),
        ("001060", "JW중외제약"),
        ("057050", "현대홈쇼핑"),
        ("018260", "삼성에스디에스"),
    ],

    "2차전지/배터리": [
        # 대형 배터리
        ("373220", "LG에너지솔루션"),
        ("051910", "LG화학"),
        ("006400", "삼성SDI"),
        # 양극재
        ("247540", "에코프로비엠"),
        ("086520", "에코프로"),
        ("066970", "엘앤에프"),
        ("005070", "코스모신소재"),
        # 음극재/전해질
        ("005490", "POSCO홀딩스"),
        ("003670", "포스코퓨처엠"),
        ("011790", "SKC"),
        ("078600", "대주전자재료"),
        ("178920", "PI첨단소재"),
        # 분리막/소재
        ("361610", "SK아이이테크놀로지"),
        ("108320", "LX세미콘"),
        ("091580", "상신이디피"),
        ("102710", "이엔에프테크놀로지"),
        ("033830", "중앙첨단소재"),
        # 2차전지 장비
        ("298040", "효성중공업"),
        ("047050", "포스코인터내셔널"),
        ("006260", "LS"),
        ("011070", "LG이노텍"),
        ("131390", "피에스케이"),
        # 리튬/니켈
        ("033100", "제룡전기"),
        ("096350", "대창솔루션"),
        ("241560", "두산퓨얼셀"),
        # 추가 2차전지 관련주 (2026 웹검색)
        ("004920", "씨아이테크"),
        ("014830", "유니드"),
        ("036490", "SK가스"),
        ("003230", "삼양식품"),
        ("357120", "코람코에너지플러스리츠"),
        ("012450", "한화에어로스페이스"),
        ("004370", "농심"),
        ("007120", "미래아이앤지"),
    ],

    "전기차": [
        # 완성차
        ("005380", "현대차"),
        ("000270", "기아"),
        # 배터리
        ("373220", "LG에너지솔루션"),
        ("006400", "삼성SDI"),
        ("051910", "LG화학"),
        ("247540", "에코프로비엠"),
        # 전기차 부품
        ("001820", "삼화콘덴서"),
        ("355150", "코스텍시스"),
        ("018880", "한온시스템"),
        ("298040", "효성중공업"),
        ("011070", "LG이노텍"),
        ("012330", "현대모비스"),
        ("204320", "만도"),
        ("010120", "LS ELECTRIC"),
        ("267260", "HD현대일렉트릭"),
        # 충전인프라
        ("012450", "한화에어로스페이스"),
        ("009830", "한화솔루션"),
        ("005850", "에스엘"),
        ("086280", "현대글로비스"),
        # 추가 전기차 관련주 (2026 웹검색)
        ("042660", "한화오션"),
        ("007860", "서연"),
        ("011320", "신안"),
        ("009450", "경동나비엔"),
        ("003490", "대한항공"),
        ("004170", "신세계"),
        ("017940", "E1"),
        ("138040", "메리츠금융지주"),
    ],

    "자율주행": [
        # 대장주
        ("204320", "만도"),
        ("012330", "현대모비스"),
        ("307950", "현대오토에버"),
        # 센서/카메라
        ("005850", "에스엘"),
        ("064240", "홈캐스트"),
        ("099320", "쎄트렉아이"),
        ("138580", "오비고"),
        # 반도체/칩
        ("054450", "텔레칩스"),
        ("094360", "칩스앤미디어"),
        ("000240", "한국앤컴퍼니"),
        ("099430", "헬로비전"),
        # 소프트웨어/AI
        ("030520", "한글과컴퓨터"),
        ("253450", "스튜디오드래곤"),
        ("183300", "코미코"),
        # 자율주행 부품
        ("065170", "이노와이어리스"),
        ("003350", "한국카본"),
        ("023800", "인지컨트롤스"),
        # 테슬라 관련
        ("043590", "크로바하이텍"),
        ("204270", "제이앤티씨"),
        ("286940", "롯데정보통신"),
        # 추가 자율주행 관련주 (2026 웹검색)
        ("048870", "싸이맥스"),
        ("096630", "에스코넥"),
        ("033640", "네패스"),
        ("039030", "이오테크닉스"),
        ("140860", "파크시스템스"),
        ("083930", "아바코"),
        ("192820", "코스맥스"),
        ("093520", "매커스"),
    ],

    "차량용반도체": [
        ("054450", "텔레칩스"),
        ("089030", "테크윙"),
        ("142210", "유니트론텍"),
        ("048870", "싸이맥스"),
        ("099320", "쎄트렉아이"),
        ("000240", "한국앤컴퍼니"),
        ("005290", "동진쎄미켐"),
        ("036540", "SFA반도체"),
        ("033640", "네패스"),
        ("067310", "하나마이크론"),
        ("064760", "티씨케이"),
        ("357780", "솔브레인"),
        ("108320", "LX세미콘"),
        ("222800", "심텍"),
        ("131970", "테스나"),
        ("039440", "에스티아이"),
        ("050890", "쏠리드"),
        ("094360", "칩스앤미디어"),
    ],

    "폐배터리/리사이클링": [
        ("365340", "성일하이텍"),
        ("058970", "엠로"),
        ("247540", "에코프로비엠"),
        ("086520", "에코프로"),
        ("003670", "포스코퓨처엠"),
        ("011790", "SKC"),
        ("005490", "POSCO홀딩스"),
        ("004020", "현대제철"),
        ("078930", "GS"),
        ("003410", "쌍용C&E"),
        ("032560", "황금에스티"),
        ("010780", "아이에스동서"),
        ("002240", "고려제강"),
        ("089010", "켐트로스"),
        ("017810", "풀무원"),
    ],

    "우주항공": [
        # 대장주
        ("047810", "한국항공우주"),
        ("012450", "한화에어로스페이스"),
        ("272210", "한화시스템"),
        ("079550", "LIG넥스원"),
        ("064350", "현대로템"),
        # 위성/발사체
        ("099320", "쎄트렉아이"),
        ("067390", "아스트"),
        ("101930", "인화정공"),
        ("071970", "STX중공업"),
        ("003570", "SNT다이내믹스"),
        # 항공
        ("003490", "대한항공"),
        ("020560", "아시아나항공"),
        ("089590", "제주항공"),
        ("272450", "진에어"),
        ("298690", "에어부산"),
        # 항공부품
        ("220260", "켄코아에어로스페이스"),
        ("005870", "휴니드"),
        ("006260", "LS"),
        ("099190", "아이센스"),
        # 추가 우주항공 관련주 (2026 웹검색)
        ("141000", "비아트론"),
        ("036570", "엔씨소프트"),
        ("035250", "강원랜드"),
    ],

    "메타버스/게임": [
        # 플랫폼
        ("035420", "네이버"),
        ("035720", "카카오"),
        # 게임사 - 대형
        ("036570", "엔씨소프트"),
        ("251270", "넷마블"),
        ("259960", "크래프톤"),
        ("112040", "위메이드"),
        # 게임사 - 중형
        ("225570", "넥슨게임즈"),
        ("095660", "네오위즈"),
        ("194480", "데브시스터즈"),
        ("078340", "컴투스"),
        ("067000", "조이시티"),
        ("069080", "웹젠"),
        # VR/AR
        ("263750", "펨트론"),
        ("119860", "다나와"),
        ("057680", "티사이언티픽"),
        ("065170", "이노와이어리스"),
        ("131370", "알서포트"),
        # 엔터/IP
        ("041510", "에스엠"),
        ("352820", "하이브"),
        ("035900", "JYP Ent."),
    ],

    # ========== 새로 추가된 테마 ==========

    "조선": [
        # 대형조선
        ("329180", "HD현대중공업"),
        ("009540", "HD한국조선해양"),
        ("042660", "한화오션"),
        ("010140", "삼성중공업"),
        ("010620", "HD현대미포"),
        # 조선 중소형
        ("097230", "HJ중공업"),
        ("100090", "삼강엠앤티"),
        ("003620", "한화엔진"),
        # 조선 엔진
        ("082740", "HSD엔진"),
        ("071970", "STX중공업"),
        # 조선기자재 - 배관/피팅
        ("014580", "태광"),
        ("101240", "하이록코리아"),
        ("092200", "디아이씨"),
        ("071090", "하이스틸"),
        # 조선기자재 - 갑판기계
        ("014940", "오리엔탈정공"),
        ("023800", "인지컨트롤스"),
        # 조선기자재 - 의장
        ("003350", "한국카본"),
        ("025820", "이구산업"),
        ("001940", "KISCO홀딩스"),
        # 조선기자재 - 기타
        ("100840", "SNT에너지"),
        ("042670", "HD현대인프라코어"),
        ("017800", "현대엘리베이"),
        ("010060", "OCI홀딩스"),
        # LNG 관련
        ("018470", "조일알미늄"),
        ("092230", "KPX홀딩스"),
        # 추가 조선 관련주 (2026 웹검색)
        ("003490", "대한항공"),
        ("104040", "대우건설"),
        ("001560", "제일연마"),
        ("003230", "삼양식품"),
        ("004890", "동일산업"),
        ("007590", "동양피스톤"),
        ("008600", "삼일"),
        ("034940", "조아제약"),
    ],

    "금융/은행": [
        # 4대 금융지주
        ("105560", "KB금융"),
        ("055550", "신한지주"),
        ("086790", "하나금융지주"),
        ("316140", "우리금융지주"),
        # 지방은행
        ("024110", "기업은행"),
        ("138930", "BNK금융지주"),
        ("139130", "DGB금융지주"),
        ("175330", "JB금융지주"),
        # 인터넷은행
        ("323410", "카카오뱅크"),
        ("417310", "토스뱅크"),
        # 기타 금융
        ("017940", "E1"),
        ("071050", "한국금융지주"),
        ("138040", "메리츠금융지주"),
    ],

    "증권/보험": [
        # 증권
        ("006800", "미래에셋증권"),
        ("016360", "삼성증권"),
        ("005940", "NH투자증권"),
        ("039490", "키움증권"),
        ("030610", "교보증권"),
        ("071050", "한국금융지주"),
        ("003540", "대신증권"),
        ("001510", "SK증권"),
        ("001500", "현대차증권"),
        ("001720", "신영증권"),
        ("003470", "유안타증권"),
        ("016610", "DB금융투자"),
        # 보험
        ("000810", "삼성화재"),
        ("005830", "DB손해보험"),
        ("001450", "현대해상"),
        ("032830", "삼성생명"),
        ("088350", "한화생명"),
        ("082640", "동양생명"),
        # 지주
        ("138040", "메리츠금융지주"),
        ("138930", "BNK금융지주"),
    ],

    "건설/인프라": [
        # 대형건설
        ("000720", "현대건설"),
        ("028260", "삼성물산"),
        ("006360", "GS건설"),
        ("047040", "대우건설"),
        ("294870", "HDC현대산업개발"),
        ("000210", "DL"),
        ("012630", "HDC"),
        # 중소 건설
        ("002410", "범양건영"),
        ("034300", "신세계건설"),
        ("005960", "동부건설"),
        ("005800", "신영"),
        # 시멘트/레미콘
        ("002140", "고려시멘트"),
        ("009770", "쌍용C&E"),
        ("003410", "쌍용C&E"),
        # 플랜트/엔지니어링
        ("001040", "CJ"),
        ("004490", "세방전지"),
        ("005950", "이수화학"),
        ("009200", "무림페이퍼"),
        # 추가 건설 관련주 (2026 웹검색)
        ("025820", "이구산업"),
        ("036580", "팜스코"),
        ("005440", "현대그린푸드"),
        ("012170", "키위미디어그룹"),
        ("005850", "에스엘"),
    ],

    "전력/에너지인프라": [
        # 전력기자재 대장주
        ("298040", "효성중공업"),
        ("010120", "LS ELECTRIC"),
        ("267260", "HD현대일렉트릭"),
        # 에너지공기업
        ("015760", "한국전력"),
        ("051600", "한전KPS"),
        ("036460", "한국가스공사"),
        # 발전설비
        ("034020", "두산에너빌리티"),
        ("052690", "한전기술"),
        ("241560", "두산퓨얼셀"),
        # 전력기기
        ("012450", "한화에어로스페이스"),
        ("117580", "대성에너지"),
        ("014915", "성문전자"),
        ("033240", "자화전자"),
        ("064350", "현대로템"),
        # 송배전
        ("006260", "LS"),
        ("112610", "씨에스윈드"),
        ("078350", "한양디지텍"),
        # 추가 전력 관련주 (2026 웹검색)
        ("267850", "아시아나IDT"),
        ("007590", "동양피스톤"),
        ("003850", "보령"),
        ("011760", "현대코퍼레이션"),
    ],

    "엔터테인먼트": [
        # 4대 엔터
        ("352820", "하이브"),
        ("035900", "JYP Ent."),
        ("041510", "에스엠"),
        ("122870", "와이지엔터테인먼트"),
        # 중소 엔터/기획사
        ("182360", "큐브엔터"),
        ("376300", "디어유"),
        ("173940", "에프엔씨엔터"),
        ("259960", "크래프톤"),
        # 콘텐츠/미디어
        ("035760", "CJ ENM"),
        ("253450", "스튜디오드래곤"),
        ("079160", "CJ CGV"),
        ("034120", "SBS"),
        # 음악/플랫폼
        ("122690", "서진오토모티브"),
        ("043710", "서울반도체"),
        ("068930", "디지털대성"),
        # 팬덤/굿즈
        ("035510", "신세계인터내셔날"),
        # 추가 엔터 관련주 (2026 웹검색)
        ("078160", "메디포스트"),
        ("016710", "대성홀딩스"),
        ("002620", "제일파마홀딩스"),
        ("060720", "KH바텍"),
        ("012510", "더존비즈온"),
        ("048410", "현대바이오"),
        ("034230", "파라다이스"),
        ("011810", "STX"),
        ("008700", "아남전자"),
        ("114190", "강원"),
    ],

    "저PBR/가치주": [
        ("009970", "영원무역홀딩스"),
        ("003550", "LG"),
        ("003490", "대한항공"),
        ("000150", "두산"),
        ("088350", "한화생명"),
        ("000880", "한화"),
        ("017670", "SK텔레콤"),
        ("015760", "한국전력"),
        ("034020", "두산에너빌리티"),
        ("010130", "고려아연"),
        ("078930", "GS"),
        ("001040", "CJ"),
        ("002380", "KCC"),
        ("000100", "유한양행"),
        ("006360", "GS건설"),
        ("004020", "현대제철"),
        ("010060", "OCI홀딩스"),
        ("004490", "세방전지"),
        ("016380", "KG동부제철"),
        ("011170", "롯데케미칼"),
        ("009150", "삼성전기"),
        ("000640", "동아쏘시오홀딩스"),
        ("000120", "CJ대한통운"),
        ("011200", "현대상선"),
    ],

    "고배당주": [
        # 통신
        ("017670", "SK텔레콤"),
        ("030200", "KT"),
        ("032640", "LG유플러스"),
        # 금융
        ("105560", "KB금융"),
        ("055550", "신한지주"),
        ("086790", "하나금융지주"),
        ("316140", "우리금융지주"),
        ("000810", "삼성화재"),
        ("016360", "삼성증권"),
        ("082640", "동양생명"),
        ("088350", "한화생명"),
        ("024110", "기업은행"),
        ("139130", "DGB금융지주"),
        ("138930", "BNK금융지주"),
        ("175330", "JB금융지주"),
        ("071050", "한국금융지주"),
        # 보험
        ("001450", "현대해상"),
        ("005830", "DB손해보험"),
        # 에너지/기타
        ("000150", "두산"),
        ("015760", "한국전력"),
        ("036460", "한국가스공사"),
        ("078930", "GS"),
        ("010130", "고려아연"),
    ],
}

# 테마 카테고리 (UI 표시용)
THEME_CATEGORIES = {
    "산업/제조": ["로봇", "반도체", "방산", "원자력/SMR", "자동차/자동차부품", "조선"],
    "신기술": ["AI/인공지능", "2차전지/배터리", "전기차", "자율주행", "차량용반도체", "메타버스/게임"],
    "금융": ["금융/은행", "증권/보험", "고배당주"],
    "인프라/서비스": ["건설/인프라", "전력/에너지인프라", "엔터테인먼트"],
    "투자전략": ["바이오", "자사주소각", "폐배터리/리사이클링", "우주항공", "저PBR/가치주"],
}

# 전체 테마 목록 (UI 선택용)
THEME_LIST = list(THEME_STOCKS.keys())


def get_theme_stocks(theme_name: str) -> list:
    """테마별 종목 리스트 반환"""
    return THEME_STOCKS.get(theme_name, [])


def get_theme_stock_codes(theme_name: str) -> set:
    """테마별 종목 코드만 set으로 반환"""
    stocks = THEME_STOCKS.get(theme_name, [])
    return {code for code, name in stocks}


def get_all_theme_names() -> list:
    """전체 테마명 리스트 반환"""
    return THEME_LIST


def get_stock_themes(stock_code: str) -> list:
    """특정 종목이 속한 테마 목록 반환"""
    themes = []
    for theme_name, stocks in THEME_STOCKS.items():
        for code, name in stocks:
            if code == stock_code:
                themes.append(theme_name)
                break
    return themes


def search_stock_in_themes(keyword: str) -> dict:
    """종목명 키워드로 테마 검색"""
    results = {}
    keyword_lower = keyword.lower()
    for theme_name, stocks in THEME_STOCKS.items():
        for code, name in stocks:
            if keyword_lower in name.lower():
                if theme_name not in results:
                    results[theme_name] = []
                results[theme_name].append((code, name))
    return results


# ========== 종목 추가/제거 관리 함수 (JSON 기반) ==========

import json
import os

# 사용자 커스텀 데이터 저장 경로
_CUSTOM_DATA_PATH = os.path.join(os.path.dirname(__file__), 'custom_theme_stocks.json')


def _load_custom_data() -> dict:
    """사용자 커스텀 데이터 로드"""
    if os.path.exists(_CUSTOM_DATA_PATH):
        try:
            with open(_CUSTOM_DATA_PATH, 'r', encoding='utf-8') as f:
                return json.load(f)
        except:
            pass
    return {"added": {}, "removed": {}}


def _save_custom_data(data: dict):
    """사용자 커스텀 데이터 저장"""
    with open(_CUSTOM_DATA_PATH, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)


def get_theme_stocks_with_custom(theme_name: str) -> list:
    """테마별 종목 리스트 반환 (커스텀 추가/제거 반영)"""
    base_stocks = THEME_STOCKS.get(theme_name, [])
    custom_data = _load_custom_data()

    # 제거된 종목 필터링
    removed_codes = set(custom_data.get("removed", {}).get(theme_name, []))
    stocks = [(code, name) for code, name in base_stocks if code not in removed_codes]

    # 추가된 종목 병합
    added_stocks = custom_data.get("added", {}).get(theme_name, [])
    existing_codes = {code for code, name in stocks}
    for stock in added_stocks:
        if stock[0] not in existing_codes:
            stocks.append(tuple(stock))

    return stocks


def add_stock_to_theme(theme_name: str, stock_code: str, stock_name: str) -> tuple:
    """
    테마에 종목 추가
    Returns: (success: bool, message: str)
    """
    if theme_name not in THEME_STOCKS:
        return False, f"테마 '{theme_name}'이 존재하지 않습니다."

    custom_data = _load_custom_data()

    # 이미 기본 데이터에 있는지 확인
    base_codes = {code for code, name in THEME_STOCKS.get(theme_name, [])}
    if stock_code in base_codes:
        # 제거 목록에서 복구
        if theme_name in custom_data.get("removed", {}):
            if stock_code in custom_data["removed"][theme_name]:
                custom_data["removed"][theme_name].remove(stock_code)
                _save_custom_data(custom_data)
                return True, f"'{stock_name}'을(를) 복구했습니다."
        return False, f"'{stock_name}'은(는) 이미 존재합니다."

    # 이미 추가된 종목인지 확인
    added_stocks = custom_data.get("added", {}).get(theme_name, [])
    added_codes = {s[0] for s in added_stocks}
    if stock_code in added_codes:
        return False, f"'{stock_name}'은(는) 이미 추가되어 있습니다."

    # 추가
    if "added" not in custom_data:
        custom_data["added"] = {}
    if theme_name not in custom_data["added"]:
        custom_data["added"][theme_name] = []

    custom_data["added"][theme_name].append([stock_code, stock_name])
    _save_custom_data(custom_data)

    return True, f"'{stock_name}'을(를) '{theme_name}'에 추가했습니다."


def remove_stock_from_theme(theme_name: str, stock_code: str) -> tuple:
    """
    테마에서 종목 제거
    Returns: (success: bool, message: str)
    """
    if theme_name not in THEME_STOCKS:
        return False, f"테마 '{theme_name}'이 존재하지 않습니다."

    custom_data = _load_custom_data()

    # 기본 데이터에 있는 종목인지 확인
    base_stocks = {code: name for code, name in THEME_STOCKS.get(theme_name, [])}
    if stock_code in base_stocks:
        # 제거 목록에 추가
        if "removed" not in custom_data:
            custom_data["removed"] = {}
        if theme_name not in custom_data["removed"]:
            custom_data["removed"][theme_name] = []

        if stock_code not in custom_data["removed"][theme_name]:
            custom_data["removed"][theme_name].append(stock_code)
            _save_custom_data(custom_data)
            return True, f"'{base_stocks[stock_code]}'을(를) 제거했습니다."
        else:
            return False, "이미 제거된 종목입니다."

    # 추가된 종목에서 제거
    added_stocks = custom_data.get("added", {}).get(theme_name, [])
    for i, (code, name) in enumerate(added_stocks):
        if code == stock_code:
            del custom_data["added"][theme_name][i]
            _save_custom_data(custom_data)
            return True, f"'{name}'을(를) 제거했습니다."

    return False, "종목을 찾을 수 없습니다."


def get_custom_changes_summary() -> dict:
    """커스텀 변경 사항 요약"""
    custom_data = _load_custom_data()
    added_count = sum(len(stocks) for stocks in custom_data.get("added", {}).values())
    removed_count = sum(len(codes) for codes in custom_data.get("removed", {}).values())
    return {
        "added_count": added_count,
        "removed_count": removed_count,
        "added": custom_data.get("added", {}),
        "removed": custom_data.get("removed", {})
    }


def reset_custom_changes(theme_name: str = None) -> tuple:
    """
    커스텀 변경 사항 초기화
    theme_name이 None이면 전체 초기화, 아니면 해당 테마만 초기화
    """
    custom_data = _load_custom_data()

    if theme_name is None:
        # 전체 초기화
        _save_custom_data({"added": {}, "removed": {}})
        return True, "모든 커스텀 변경을 초기화했습니다."
    else:
        # 특정 테마만 초기화
        if theme_name in custom_data.get("added", {}):
            del custom_data["added"][theme_name]
        if theme_name in custom_data.get("removed", {}):
            del custom_data["removed"][theme_name]
        _save_custom_data(custom_data)
        return True, f"'{theme_name}' 테마의 변경을 초기화했습니다."
